import{_ as s,c as a,o as i,a1 as e}from"./chunks/framework.fM52Fl5S.js";const l="/assets/mysql-1.xrPFntCh.png",t="/assets/mysql-2.Dt4mqmwd.png",F=JSON.parse('{"title":"MySQL","description":"","frontmatter":{},"headers":[],"relativePath":"ops/deploy/mysql.md","filePath":"ops/deploy/mysql.md","lastUpdated":1716529767000}'),n={name:"ops/deploy/mysql.md"},h=e('<h1 id="mysql" tabindex="-1">MySQL <a class="header-anchor" href="#mysql" aria-label="Permalink to &quot;MySQL&quot;">​</a></h1><h2 id="centos" tabindex="-1">CentOS <a class="header-anchor" href="#centos" aria-label="Permalink to &quot;CentOS&quot;">​</a></h2><h3 id="在线安装-推荐" tabindex="-1">在线安装（推荐） <a class="header-anchor" href="#在线安装-推荐" aria-label="Permalink to &quot;在线安装（推荐）&quot;">​</a></h3><ul><li><a href="https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/" target="_blank" rel="noreferrer">安装说明</a></li><li><a href="https://dev.mysql.com/downloads/repo/yum/" target="_blank" rel="noreferrer">下载地址</a></li></ul><h4 id="_1-查看-centos-版本" tabindex="-1">1. 查看 CentOS 版本 <a class="header-anchor" href="#_1-查看-centos-版本" aria-label="Permalink to &quot;1. 查看 CentOS 版本&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/centos-release</span></span></code></pre></div><h4 id="_2-选择合适的-yum-repository-安装包" tabindex="-1">2. 选择合适的 Yum Repository 安装包 <a class="header-anchor" href="#_2-选择合适的-yum-repository-安装包" aria-label="Permalink to &quot;2. 选择合适的 Yum Repository 安装包&quot;">​</a></h4><p>例如版本是 CentOS 7 就选择下面这个下载。</p><p><img src="'+l+'" alt="mysql-1.png"></p><p>跳过登录，直接下载。</p><p><img src="'+t+`" alt="mysql-2.png"></p><p>这里可以不下载到本地电脑，而是直接复制下载连接，下载到服务器，例如：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://dev.mysql.com/get/mysql80-community-release-el7-7.noarch.rpm</span></span></code></pre></div><h4 id="_3-安装-yum-repository" tabindex="-1">3. 安装 Yum Repository <a class="header-anchor" href="#_3-安装-yum-repository" aria-label="Permalink to &quot;3. 安装 Yum Repository&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Uvh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql80-community-release-el7-7.noarch.rpm</span></span></code></pre></div><h4 id="_4-配置要安装的-mysql-版本" tabindex="-1">4. 配置要安装的 MySQL 版本 <a class="header-anchor" href="#_4-配置要安装的-mysql-版本" aria-label="Permalink to &quot;4. 配置要安装的 MySQL 版本&quot;">​</a></h4><blockquote><p>目前默认安装最新 8.0 版本，如果不需要改就跳过这一步。</p></blockquote><p>例如切换到 5.7 版本安装：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum-config-manager</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --disable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql80-community</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum-config-manager</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql57-community</span></span></code></pre></div><p>如果找不到 <code>yum-config-manager</code> 命令，则可以直接改配置文件 <code>/etc/yum.repos.d/mysql-community.repo</code>，将 <code>enbale</code> 改为 0 或 1：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[mysql80-community]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MySQL</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 8.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Community</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Server</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">baseurl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">http://repo.mysql.com/yum/mysql-8.0-community/el/6/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$basearch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">enabled</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gpgcheck</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gpgkey</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql-2022</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span></span></code></pre></div><h4 id="_5-安装-mysql" tabindex="-1">5. 安装 MySQL <a class="header-anchor" href="#_5-安装-mysql" aria-label="Permalink to &quot;5. 安装 MySQL&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql-community-server</span></span></code></pre></div><h4 id="_6-启动-mysql" tabindex="-1">6. 启动 MySQL <a class="header-anchor" href="#_6-启动-mysql" aria-label="Permalink to &quot;6. 启动 MySQL&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysqld</span></span></code></pre></div><p>设置开机自启：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysqld</span></span></code></pre></div><p>查看运行状态：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysqld</span></span></code></pre></div><h4 id="_7-修改初始密码" tabindex="-1">7. 修改初始密码 <a class="header-anchor" href="#_7-修改初始密码" aria-label="Permalink to &quot;7. 修改初始密码&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;temporary password&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/log/mysqld.log</span></span></code></pre></div><p>输入初始密码登录：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -uroot</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span></span></code></pre></div><p>修改密码：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> USER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;root&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IDENTIFIED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;新密码&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h4 id="_8-开启远程访问-可选" tabindex="-1">8. 开启远程访问（可选） <a class="header-anchor" href="#_8-开启远程访问-可选" aria-label="Permalink to &quot;8. 开启远程访问（可选）&quot;">​</a></h4><div class="warning custom-block"><p class="custom-block-title">注意</p><p>生产环境不要开远程访问，有被攻击的风险。</p></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mysql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> host</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;%&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;root&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FLUSH PRIVILEGES;</span></span></code></pre></div><h3 id="离线安装" tabindex="-1">离线安装 <a class="header-anchor" href="#离线安装" aria-label="Permalink to &quot;离线安装&quot;">​</a></h3><ul><li><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noreferrer">下载地址</a> （选择 <code>Red Hat Enterprise Linux / Oracle Linux</code>）</li></ul><h2 id="windows" tabindex="-1">Windows <a class="header-anchor" href="#windows" aria-label="Permalink to &quot;Windows&quot;">​</a></h2><ul><li><a href="https://dev.mysql.com/downloads/windows/installer/8.0.html" target="_blank" rel="noreferrer">安装包 下载地址</a></li><li><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noreferrer">压缩包 下载地址</a></li></ul>`,42),p=[h];function k(r,d,o,c,y,g){return i(),a("div",null,p)}const u=s(n,[["render",k]]);export{F as __pageData,u as default};
