import{_ as s,c as a,o as l,d as n}from"./app.baf780c0.js";const e="/assets/mysql-1.a706e9bb.png",p="/assets/mysql-2.ec0c7f70.png",u=JSON.parse('{"title":"MySQL","description":"","frontmatter":{},"headers":[{"level":2,"title":"CentOS","slug":"centos","link":"#centos","children":[{"level":3,"title":"在线安装（推荐）","slug":"在线安装-推荐","link":"#在线安装-推荐","children":[]},{"level":3,"title":"离线安装","slug":"离线安装","link":"#离线安装","children":[]}]},{"level":2,"title":"Windows","slug":"windows","link":"#windows","children":[]}],"relativePath":"ops/deploy/mysql.md","lastUpdated":1674032849000}'),o={name:"ops/deploy/mysql.md"},t=n(`<h1 id="mysql" tabindex="-1">MySQL <a class="header-anchor" href="#mysql" aria-hidden="true">#</a></h1><h2 id="centos" tabindex="-1">CentOS <a class="header-anchor" href="#centos" aria-hidden="true">#</a></h2><h3 id="在线安装-推荐" tabindex="-1">在线安装（推荐） <a class="header-anchor" href="#在线安装-推荐" aria-hidden="true">#</a></h3><ul><li><a href="https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/" target="_blank" rel="noreferrer">安装说明</a></li><li><a href="https://dev.mysql.com/downloads/repo/yum/" target="_blank" rel="noreferrer">下载地址</a></li></ul><h4 id="_1-查看-centos-版本" tabindex="-1">1. 查看 CentOS 版本 <a class="header-anchor" href="#_1-查看-centos-版本" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/centos-release</span></span>
<span class="line"></span></code></pre></div><h4 id="_2-选择合适的-yum-repository-安装包" tabindex="-1">2. 选择合适的 Yum Repository 安装包 <a class="header-anchor" href="#_2-选择合适的-yum-repository-安装包" aria-hidden="true">#</a></h4><p>例如版本是 CentOS 7 就选择下面这个下载。</p><p><img src="`+e+'" alt="mysql-1.png"></p><p>跳过登录，直接下载。</p><p><img src="'+p+`" alt="mysql-2.png"></p><p>这里可以不下载到本地电脑，而是直接复制下载连接，下载到服务器，例如：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">wget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://dev.mysql.com/get/mysql80-community-release-el7-7.noarch.rpm</span></span>
<span class="line"></span></code></pre></div><h4 id="_3-安装-yum-repository" tabindex="-1">3. 安装 Yum Repository <a class="header-anchor" href="#_3-安装-yum-repository" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">rpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-Uvh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql80-community-release-el7-7.noarch.rpm</span></span>
<span class="line"></span></code></pre></div><h4 id="_4-配置要安装的-mysql-版本" tabindex="-1">4. 配置要安装的 MySQL 版本 <a class="header-anchor" href="#_4-配置要安装的-mysql-版本" aria-hidden="true">#</a></h4><blockquote><p>目前默认安装最新 8.0 版本，如果不需要改就跳过这一步。</p></blockquote><p>例如切换到 5.7 版本安装：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">yum-config-manager</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--disable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql80-community</span></span>
<span class="line"><span style="color:#FFCB6B;">yum-config-manager</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--enable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql57-community</span></span>
<span class="line"></span></code></pre></div><p>如果找不到 <code>yum-config-manager</code> 命令，则可以直接改配置文件 <code>/etc/yum.repos.d/mysql-community.repo</code>，将 <code>enbale</code> 改为 0 或 1：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">mysql80-community</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">MySQL</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8.0</span><span style="color:#A6ACCD;"> Community Server</span></span>
<span class="line"><span style="color:#A6ACCD;">baseurl</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">http://repo.mysql.com/yum/mysql-</span><span style="color:#F78C6C;">8.0</span><span style="color:#C3E88D;">-community/el/</span><span style="color:#F78C6C;">6</span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;">$basearch</span><span style="color:#C3E88D;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">enabled</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">gpgcheck</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">gpgkey</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql-</span><span style="color:#F78C6C;">2022</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#FFCB6B;">file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span></span>
<span class="line"></span></code></pre></div><h4 id="_5-安装-mysql" tabindex="-1">5. 安装 MySQL <a class="header-anchor" href="#_5-安装-mysql" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql-community-server</span></span>
<span class="line"></span></code></pre></div><h4 id="_6-启动-mysql" tabindex="-1">6. 启动 MySQL <a class="header-anchor" href="#_6-启动-mysql" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysqld</span></span>
<span class="line"></span></code></pre></div><p>设置开机自启：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysqld</span></span>
<span class="line"></span></code></pre></div><p>查看运行状态：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysqld</span></span>
<span class="line"></span></code></pre></div><h4 id="_7-修改初始密码" tabindex="-1">7. 修改初始密码 <a class="header-anchor" href="#_7-修改初始密码" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">temporary password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/log/mysqld.log</span></span>
<span class="line"></span></code></pre></div><p>输入初始密码登录：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-uroot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span></span>
<span class="line"></span></code></pre></div><p>修改密码：</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">USER</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> IDENTIFIED </span><span style="color:#F78C6C;">BY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">新密码</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="_8-开启远程访问-可选" tabindex="-1">8. 开启远程访问（可选） <a class="header-anchor" href="#_8-开启远程访问-可选" aria-hidden="true">#</a></h4><div class="warning custom-block"><p class="custom-block-title">注意</p><p>生产环境不要开远程访问，有被攻击的风险。</p></div><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#F78C6C;">UPDATE</span><span style="color:#A6ACCD;"> mysql.user </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> host</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> user</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">FLUSH PRIVILEGES;</span></span>
<span class="line"></span></code></pre></div><h3 id="离线安装" tabindex="-1">离线安装 <a class="header-anchor" href="#离线安装" aria-hidden="true">#</a></h3><ul><li><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noreferrer">下载地址</a> （选择 <code>Red Hat Enterprise Linux / Oracle Linux</code>）</li></ul><h2 id="windows" tabindex="-1">Windows <a class="header-anchor" href="#windows" aria-hidden="true">#</a></h2><ul><li><a href="https://dev.mysql.com/downloads/windows/installer/8.0.html" target="_blank" rel="noreferrer">安装包 下载地址</a></li><li><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noreferrer">压缩包 下载地址</a></li></ul>`,42),c=[t];function r(i,y,d,C,h,m){return l(),a("div",null,c)}const g=s(o,[["render",r]]);export{u as __pageData,g as default};
